/* EnjoyLive.0.0.1 (2013-07-07) https://github.com/solygen/EnjoyLive.git */var apiKey="4dd6139b47e4fb52215e39bc49c23fa6",apiSecret="4c9b6ab72a2580dd57422994f6d277c7",cache=new LastFMCache,lastfm=new LastFM({apiKey:apiKey,apiSecret:apiSecret,cache:cache}),events,node,contentnode=$(document.body).find(".row"),util={toIso:function(a){var b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return b=10>b?"0"+b:b,c=10>c?"0"+c:c,d+"-"+c+"-"+b},getEventObject:function(a){return a.artists.artist?($(node.find("p")[0]).append(util.toIso(new Date(a.startDate))+": "+'<a href = "'+a.url+'">'+[].concat(a.artists.artist).join(", ")+"</a>"+"<br>"),{eventid:a.id,artists:a.artists,venueid:a.venue.id,venuelabel:a.venue.name+a.venue.location.postalcode+a.venue.location.city,venuecity:a.venue.location.city,date:a.startDate,day:a.startDate,attendance:a.attendance,attendees:""}):{}},getNode:function(){return $('<div class="span4"><h2>Heading</h2><p></p></div>')},getDefaultVenues:function(){return{cologne:["8778655","8787338","8778353","8852183","8780273","8850228"],siegen:["8781504","8781389","8870288","8825365","8782593","8829101","9088822","8917754","8804055"],olpe:["8782682","8918880","8915189","9068483","8999095","8915220","8915442","8916590","8782130","9005541","8929879","8819113","8865281","8918826","8785391"],bochum:["8779889","8795925"]}}},wrapper={getEvents:function(a){return lastfm.venue.getEvents({venue:a})}},render=function(a){contentnode.empty(),_.each(a,function(a){wrapper.getEvents(a).done(function(a){if(a.events["@attr"]){var b=[].concat(a.events.event);node=util.getNode(),node.find("h2").html('<i class="icon-bullseye">&nbsp;'+a.events["@attr"].venue+"</i>"),events=_.map(b,util.getEventObject),contentnode.append(node)}})})},navigate=function(){if("#"===location.hash.substr(0,1)&&location.hash.length>1){var a=""===location.hash.substr(1).replace(/[0-9,]/g,"");a?render(location.hash.substr(1).split(",")):util.getDefaultVenues()[location.hash.substr(1)]?location.hash="#"+util.getDefaultVenues()[location.hash.substr(1)]:render()}else location.hash="#"+_.flatten(util.getDefaultVenues()).join(",")};window.onhashchange=navigate,navigate(),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();